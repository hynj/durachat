import{f as x,h as J,a as f,s as y}from"../chunks/BDdIJgRh.js";import{p as K,s as g,a as Q,o as U,b as V,t as k,c as l,g as t,$ as W,d as e,r,e as $,n as q}from"../chunks/Bcdcg6QJ.js";import{i as C}from"../chunks/CGJFYSJu.js";import{a as X,b as Y}from"../chunks/HP_sVpL7.js";import{p as Z}from"../chunks/DV4FHoSA.js";import{c as ee}from"../chunks/B6bYGZD0.js";import{C as re}from"../chunks/k013B_hz.js";var te=x('<div class="flex min-h-screen items-center justify-center"><div class="text-center"><div class="border-primary mx-auto mb-4 h-8 w-8 animate-spin rounded-full border-b-2"></div> <p class="text-muted-foreground">Loading shared conversation...</p></div></div>'),ae=x('<div class="flex min-h-screen items-center justify-center"><div class="max-w-md text-center"><div class="mb-4 text-6xl">ðŸ˜•</div> <h1 class="mb-2 text-2xl font-bold">Share Link Not Found</h1> <p class="text-muted-foreground mb-4"> </p> <a href="/" class="bg-primary text-primary-foreground hover:bg-primary/90 inline-flex items-center rounded-md px-4 py-2 transition-colors">Return to DuraChat</a></div></div>'),se=x('<div class="container mx-auto max-w-4xl py-8"><div class="border-border mb-8 border-b pb-4"><div class="flex items-center justify-between"><div><h1 class="text-2xl font-bold"> </h1> <p class="text-muted-foreground mt-1 text-sm"> </p></div> <a href="/" class="bg-muted text-muted-foreground hover:bg-muted/80 inline-flex items-center rounded-md px-3 py-2 text-sm transition-colors"><svg class="mr-2 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg> Open DuraChat</a></div></div> <div class="bg-muted/50 border-border mb-6 rounded-lg border p-3"><div class="flex items-center"><svg class="text-muted-foreground mr-2 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <span class="text-muted-foreground text-sm">This is a read-only view of a shared conversation. <a href="/" class="underline hover:no-underline">Open DuraChat</a> to start your own conversation.</span></div></div> <div class="pb-8"><!></div></div>'),oe=x('<div class="bg-background min-h-screen"><!></div>');function ue(B,O){K(O,!0);const[z,A]=X(),E=()=>Y(Z,"$page",z);let v=g(null),p=g(Q([])),j=g(!0),c=g(null),M=null,D=null;U(async()=>{const o=E().url.pathname.split("/").filter(a=>a.length>0);if(o.length>=3&&o[0]==="share"){M=o[1],D=o[2];try{const a=await ee.share[":doId"][":uniqueId"].$get({param:{doId:M,uniqueId:D}});if(a.ok){const n=await a.json();l(v,n.conversation,!0),l(p,n.messages,!0)}else{const n=await a.json();l(c,n.error||"Failed to load shared conversation",!0)}}catch(a){console.error("Error loading shared conversation:",a),l(c,"Failed to load shared conversation")}}else l(c,"Invalid share link format");l(j,!1)});var b=oe();J(s=>{k(()=>W.title=`${t(v)?`Shared: ${t(v).title}`:"Shared Chat"} - DuraChat`)});var H=e(b);{var N=s=>{var o=te();f(s,o)},P=(s,o)=>{{var a=i=>{var m=ae(),h=e(m),d=$(e(h),4),u=e(d,!0);r(d),q(2),r(h),r(m),k(()=>y(u,t(c))),f(i,m)},n=(i,m)=>{{var h=d=>{var u=se(),_=e(u),I=e(_),S=e(I),w=e(S),R=e(w,!0);r(w);var F=$(w,2),T=e(F);r(F),r(S),q(2),r(I),r(_);var L=$(_,4),G=e(L);re(G,{get messages(){return t(p)},allAttachments:[],isStreaming:!1,reasoningHistory:new Map}),r(L),r(u),k(()=>{y(R,t(v).title),y(T,`Shared conversation â€¢ ${t(p).length??""} messages`)}),f(d,u)};C(i,d=>{t(v)&&t(p)&&d(h)},m)}};C(s,i=>{t(c)?i(a):i(n,!1)},o)}};C(H,s=>{t(j)?s(N):s(P,!1)})}r(b),f(B,b),V(),A()}export{ue as component};
