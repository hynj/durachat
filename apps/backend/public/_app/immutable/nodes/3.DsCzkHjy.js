import{c as ee,a as e,f as c,h as ze,t as C,s as Ne}from"../chunks/CBDu9q3P.js";import{f as _,k as Re,o as Ve,n as qe,u as d,q as T,m as H,t as h,$ as Ee,K as $,l as r,v as i,w as Ge,L as xe}from"../chunks/CMDmeOge.js";import{i as J}from"../chunks/Db6v0tth.js";import{l as He,s as Je,c as s}from"../chunks/CdkfG8Tv.js";import{I as Oe,s as Qe,B as le,t as ye,C as We,a as Xe,b as Ze}from"../chunks/DjXrnCT3.js";import{C as ne,a as ea,b as de,c as ie,d as ce,B as we,e as ve,K as aa}from"../chunks/DfV9-1AD.js";import{U as ta,A as ra,a as sa,b as oa,c as la,d as na,e as da,f as ia,R as ca}from"../chunks/txKQTctH.js";import{c as Pe}from"../chunks/B6bYGZD0.js";import{c as va,g as ua}from"../chunks/DFyo3ZeO.js";import{g as be}from"../chunks/Cey2Q5ud.js";import{A as fa,C as _a,a as pa,S as $a}from"../chunks/MBVWrcVg.js";import"../chunks/CEebuqn1.js";function Ce(A,N){const b=He(N,["children","$$slots","$$events","$$legacy"]),q=[["path",{d:"M3 6h18"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17"}]];Oe(A,Je({name:"trash-2"},()=>b,{get iconNode(){return q},children:(K,ae)=>{var F=ee(),te=_(F);Qe(te,N,"default",{}),e(K,F)},$$slots:{default:!0}}))}async function ma(){console.log("üßπ Starting complete data clear...");try{await va();const A=await Pe.test["clear-all"].$delete();if(!A.ok){const b=await A.json();throw new Error(`Backend clear failed: ${b.error||"Unknown error"}`)}const N=await A.json();console.log("üéâ All data cleared successfully:",N.message)}catch(A){throw console.error("‚ùå Failed to clear all data:",A),A}}var ga=c("<!> Back to Chat",1),ha=c('<div class="flex items-center justify-center py-8"><div class="h-8 w-8 animate-spin rounded-full border-2 border-current border-t-transparent"></div></div>'),xa=c('<div class="flex items-center space-x-2"><!> <!></div> <!>',1),ya=c('<p class="text-sm text-green-600">Copied to clipboard!</p>'),wa=c('<div class="space-y-2"><label class="text-sm font-medium">Your Login Code</label> <div class="flex items-center space-x-2"><!> <!></div> <!></div> <div class="rounded-lg bg-amber-50 p-4 dark:bg-amber-950/20"><div class="flex items-start space-x-2"><!> <div class="space-y-1"><p class="text-sm font-medium text-amber-800 dark:text-amber-200">Save this code!</p> <p class="text-sm text-amber-700 dark:text-amber-300">Store it somewhere safe like a password manager.</p></div></div></div>',1),ba=c("<!> <!>",1),Ca=c('<div class="flex items-center space-x-2"><!> <!></div> <!>',1),Pa=c('<div class="space-y-3"><div class="flex items-center justify-between"><span class="text-sm font-medium">Credits Balance</span> <!></div> <div class="flex items-center justify-between"><span class="text-sm font-medium">Account Type</span> <!></div></div>'),ka=c("<!> <!>",1),Aa=c('<div class="flex items-center space-x-2"><!> <!></div> <!>',1),La=c("<!> Clear All Data",1),Sa=c(`<div class="space-y-4"><div class="rounded-lg bg-red-50 p-4 dark:bg-red-950/20"><div class="space-y-3"><div><h4 class="text-sm font-medium text-red-800 dark:text-red-200">Clear All Conversations</h4> <p class="text-sm text-red-700 dark:text-red-300">This will permanently delete all your conversations and messages. This action
											cannot be undone.</p></div> <!></div></div></div>`),Ta=c("<!> <!>",1),ja=c('<div class="grid gap-6 md:grid-cols-2"><!> <!> <!></div>'),Ba=c('<div class="py-8 text-center"><p class="text-muted-foreground">Please log in to view your profile</p></div>'),Da=c("<!> <!>",1),Fa=c("<!> <!>",1),Ua=c("<!> <!>",1),Ia=c('<div class="container mx-auto max-w-4xl px-4 py-6"><div class="space-y-6"><div class="space-y-4"><!> <div class="flex items-center space-x-4"><div class="bg-primary/10 flex h-16 w-16 items-center justify-center rounded-full"><!></div> <div><h1 class="text-3xl font-bold">Profile</h1> <p class="text-muted-foreground">Your account information and login code</p></div></div></div> <!></div></div> <!>',1);function Oa(A,N){Re(N,!0);let b=H(null),q=H(!1),K=H(!1),ae=H(null),F=H(!1);Ve(async()=>{T(ae,ua(),!0),h(ae)&&await te()});async function te(){try{T(q,!0);const a=await Pe["user-settings"].$get();a.ok&&T(b,await a.json(),!0)}catch(a){console.error("Failed to load user settings:",a)}finally{T(q,!1)}}function ke(a){return a.replace(/(.{4})/g,"$1-").slice(0,-1)}async function Ae(){var a;if((a=h(b))!=null&&a.keyLogin)try{await navigator.clipboard.writeText(h(b).keyLogin),T(K,!0),setTimeout(()=>{T(K,!1)},2e3)}catch(U){console.error("Failed to copy login code:",U)}}function Le(a){return`¬£${(a/100).toFixed(2)}`}function Se(){T(F,!0)}async function Te(){try{await ma(),be("/"),ye("All conversations and messages have been deleted.",{icon:We})}catch(a){console.error("Failed to clear data:",a),ye("Failed to clear data. Check console for details.",{icon:Xe})}finally{T(F,!1)}}var ue=Ia();ze(a=>{Ee.title="Profile - DuraChat"});var re=_(ue),fe=d(re),se=d(fe),_e=d(se);le(_e,{variant:"ghost",onclick:()=>be("/"),class:"w-fit",children:(a,U)=>{var I=ga(),O=_(I);fa(O,{class:"mr-2 h-4 w-4"}),$(),e(a,I)},$$slots:{default:!0}});var pe=r(_e,2),$e=d(pe),je=d($e);ta(je,{class:"text-primary h-8 w-8"}),i($e),$(2),i(pe),i(se);var Be=r(se,2);{var De=a=>{var U=ha();e(a,U)},Fe=(a,U)=>{{var I=j=>{var Y=ja(),Q=d(Y);{var oe=L=>{var M=ee(),B=_(M);s(B,()=>ve,(z,P)=>{P(z,{children:(D,S)=>{var p=ba(),x=_(p);s(x,()=>ne,(m,t)=>{t(m,{children:(o,l)=>{var y=xa(),g=_(y),n=d(g);aa(n,{class:"h-5 w-5"});var f=r(n,2);s(f,()=>de,(k,w)=>{w(k,{children:(E,Z)=>{$();var R=C("Login Code");e(E,R)},$$slots:{default:!0}})}),i(g);var v=r(g,2);s(v,()=>ie,(k,w)=>{w(k,{children:(E,Z)=>{$();var R=C("Use this code to log back into your account from any device. Keep it safe!");e(E,R)},$$slots:{default:!0}})}),e(o,y)},$$slots:{default:!0}})});var u=r(x,2);s(u,()=>ce,(m,t)=>{t(m,{class:"space-y-4",children:(o,l)=>{var y=wa(),g=_(y),n=r(d(g),2),f=d(n);const v=xe(()=>ke(h(b).keyLogin));Ze(f,{get value(){return h(v)},readonly:!0,class:"text-center font-mono"});var k=r(f,2);le(k,{variant:"outline",size:"sm",onclick:Ae,get disabled(){return h(K)},children:(G,ge)=>{var he=ee(),Me=_(he);{var Ke=V=>{_a(V,{class:"h-4 w-4 text-green-500"})},Ye=V=>{pa(V,{class:"h-4 w-4"})};J(Me,V=>{h(K)?V(Ke):V(Ye,!1)})}e(G,he)},$$slots:{default:!0}}),i(n);var w=r(n,2);{var E=G=>{var ge=ya();e(G,ge)};J(w,G=>{h(K)&&G(E)})}i(g);var Z=r(g,2),R=d(Z),Ie=d(R);$a(Ie,{class:"mt-0.5 h-5 w-5 text-amber-600 dark:text-amber-400"}),$(2),i(R),i(Z),e(o,y)},$$slots:{default:!0}})}),e(D,p)},$$slots:{default:!0}})}),e(L,M)};J(Q,L=>{h(b).keyLogin&&L(oe)})}var W=r(Q,2);const me=xe(()=>h(b).keyLogin?"":"md:col-span-2");s(W,()=>ve,(L,M)=>{M(L,{get class(){return h(me)},children:(B,z)=>{var P=ka(),D=_(P);s(D,()=>ne,(p,x)=>{x(p,{children:(u,m)=>{var t=Ca(),o=_(t),l=d(o);ea(l,{class:"h-5 w-5"});var y=r(l,2);s(y,()=>de,(n,f)=>{f(n,{children:(v,k)=>{$();var w=C("Account Information");e(v,w)},$$slots:{default:!0}})}),i(o);var g=r(o,2);s(g,()=>ie,(n,f)=>{f(n,{children:(v,k)=>{$();var w=C("Your account details and usage information");e(v,w)},$$slots:{default:!0}})}),e(u,t)},$$slots:{default:!0}})});var S=r(D,2);s(S,()=>ce,(p,x)=>{x(p,{class:"space-y-4",children:(u,m)=>{var t=Pa(),o=d(t),l=r(d(o),2);we(l,{variant:"secondary",class:"font-mono",children:(n,f)=>{$();var v=C();Ge(k=>Ne(v,k),[()=>Le(h(b).credits)]),e(n,v)},$$slots:{default:!0}}),i(o);var y=r(o,2),g=r(d(y),2);we(g,{variant:"outline",children:(n,f)=>{$();var v=C("Guest User");e(n,v)},$$slots:{default:!0}}),i(y),i(t),e(u,t)},$$slots:{default:!0}})}),e(B,P)},$$slots:{default:!0}})});var X=r(W,2);s(X,()=>ve,(L,M)=>{M(L,{class:"md:col-span-2",children:(B,z)=>{var P=Ta(),D=_(P);s(D,()=>ne,(p,x)=>{x(p,{children:(u,m)=>{var t=Aa(),o=_(t),l=d(o);Ce(l,{class:"h-5 w-5"});var y=r(l,2);s(y,()=>de,(n,f)=>{f(n,{children:(v,k)=>{$();var w=C("Data Management");e(v,w)},$$slots:{default:!0}})}),i(o);var g=r(o,2);s(g,()=>ie,(n,f)=>{f(n,{children:(v,k)=>{$();var w=C("Manage your conversation data and account cleanup options");e(v,w)},$$slots:{default:!0}})}),e(u,t)},$$slots:{default:!0}})});var S=r(D,2);s(S,()=>ce,(p,x)=>{x(p,{children:(u,m)=>{var t=Sa(),o=d(t),l=d(o),y=r(d(l),2);le(y,{variant:"destructive",onclick:Se,class:"w-fit",children:(g,n)=>{var f=La(),v=_(f);Ce(v,{class:"mr-2 h-4 w-4"}),$(),e(g,f)},$$slots:{default:!0}}),i(l),i(o),i(t),e(u,t)},$$slots:{default:!0}})}),e(B,P)},$$slots:{default:!0}})}),i(Y),e(j,Y)},O=j=>{var Y=Ba();e(j,Y)};J(a,j=>{h(b)?j(I):j(O,!1)},U)}};J(Be,a=>{h(q)?a(De):a(Fe,!1)})}i(fe),i(re);var Ue=r(re,2);s(Ue,()=>ca,(a,U)=>{U(a,{get open(){return h(F)},set open(I){T(F,I,!0)},children:(I,O)=>{var j=ee(),Y=_(j);s(Y,()=>ra,(Q,oe)=>{oe(Q,{children:(W,me)=>{var X=Ua(),L=_(X);s(L,()=>sa,(B,z)=>{z(B,{children:(P,D)=>{var S=Da(),p=_(S);s(p,()=>oa,(u,m)=>{m(u,{children:(t,o)=>{$();var l=C("Clear all data?");e(t,l)},$$slots:{default:!0}})});var x=r(p,2);s(x,()=>la,(u,m)=>{m(u,{children:(t,o)=>{$();var l=C("This will permanently delete ALL conversations and messages. This action cannot be undone.");e(t,l)},$$slots:{default:!0}})}),e(P,S)},$$slots:{default:!0}})});var M=r(L,2);s(M,()=>na,(B,z)=>{z(B,{children:(P,D)=>{var S=Fa(),p=_(S);s(p,()=>da,(u,m)=>{m(u,{onclick:()=>{T(F,!1)},children:(t,o)=>{$();var l=C("Cancel");e(t,l)},$$slots:{default:!0}})});var x=r(p,2);s(x,()=>ia,(u,m)=>{m(u,{onclick:Te,children:(t,o)=>{$();var l=C("Clear All Data");e(t,l)},$$slots:{default:!0}})}),e(P,S)},$$slots:{default:!0}})}),e(W,X)},$$slots:{default:!0}})}),e(I,j)},$$slots:{default:!0}})}),e(A,ue),qe()}export{Oa as component};
