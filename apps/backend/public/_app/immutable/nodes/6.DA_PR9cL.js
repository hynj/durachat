import{f as g,h as K,a as h,s as $}from"../chunks/BDdIJgRh.js";import{p as Q,s as f,a as T,o as U,b as V,t as k,c as d,g as t,$ as W,d as e,r,e as C,n as L}from"../chunks/Bcdcg6QJ.js";import{i as j}from"../chunks/CGJFYSJu.js";import{a as X,b as Y}from"../chunks/HP_sVpL7.js";import{p as Z}from"../chunks/CGzZOiDJ.js";import{c as ee}from"../chunks/B6bYGZD0.js";import{C as re}from"../chunks/T3qT1o-h.js";var ae=g('<div class="flex min-h-screen items-center justify-center"><div class="text-center"><div class="border-primary mx-auto mb-4 h-8 w-8 animate-spin rounded-full border-b-2"></div> <p class="text-muted-foreground">Loading shared conversation...</p></div></div>'),te=g('<div class="flex min-h-screen items-center justify-center"><div class="max-w-md text-center"><div class="mb-4 text-6xl">ðŸ˜•</div> <h1 class="mb-2 text-2xl font-bold">Share Link Not Found</h1> <p class="text-muted-foreground mb-4"> </p> <a href="/" class="bg-primary text-primary-foreground hover:bg-primary/90 inline-flex items-center rounded-md px-4 py-2 transition-colors">Return to DuraChat</a></div></div>'),se=g('<div class="container mx-auto max-w-4xl py-8"><div class="border-border mb-8 border-b pb-4"><div class="flex items-center justify-between"><div><h1 class="text-2xl font-bold"> </h1> <p class="text-muted-foreground mt-1 text-sm"> </p></div> <a href="/" class="bg-muted text-muted-foreground hover:bg-muted/80 inline-flex items-center rounded-md px-3 py-2 text-sm transition-colors"><svg class="mr-2 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg> Open DuraChat</a></div></div> <div class="pb-8"><!></div></div>'),oe=g('<div class="bg-background min-h-screen"><!></div>');function pe(q,P){Q(P,!0);const[A,B]=X(),E=()=>Y(Z,"$page",A);let l=f(null),p=f(T([])),S=f(!0),v=f(null),x=null,b=null;U(async()=>{const a=E().url.searchParams;if(x=a.get("do"),b=a.get("id"),x&&b)try{const s=await ee["api-share"].view.$get({query:{do:x,id:b}});if(s.ok){const o=await s.json();d(l,o.conversation,!0),d(p,o.messages,!0)}else{const o=await s.json();d(v,o.error||"Failed to load shared conversation",!0)}}catch(s){console.error("Error loading shared conversation:",s),d(v,"Failed to load shared conversation")}else d(v,"Invalid share link - missing parameters");d(S,!1)});var _=oe();K(a=>{k(()=>W.title=`${t(l)?`Shared: ${t(l).title}`:"Shared Chat"} - DuraChat`)});var H=e(_);{var N=a=>{var s=ae();h(a,s)},O=(a,s)=>{{var o=i=>{var c=te(),u=e(c),n=C(e(u),4),m=e(n,!0);r(n),L(2),r(u),r(c),k(()=>$(m,t(v))),h(i,c)},R=(i,c)=>{{var u=n=>{var m=se(),y=e(m),D=e(y),M=e(D),w=e(M),z=e(w,!0);r(w);var F=C(w,2),G=e(F);r(F),r(M),L(2),r(D),r(y);var I=C(y,2),J=e(I);re(J,{get messages(){return t(p)},allAttachments:[],isStreaming:!1,reasoningHistory:new Map}),r(I),r(m),k(()=>{$(z,t(l).title),$(G,`Shared conversation â€¢ ${t(p).length??""} messages`)}),h(n,m)};j(i,n=>{t(l)&&t(p)&&n(u)},c)}};j(a,i=>{t(v)?i(o):i(R,!1)},s)}};j(H,a=>{t(S)?a(N):a(O,!1)})}r(_),h(q,_),V(),B()}export{pe as component};
